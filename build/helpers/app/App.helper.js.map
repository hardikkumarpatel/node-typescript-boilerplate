{"version":3,"file":"App.helper.js","names":["_httpStatusCodes","_interopRequireWildcard","require","_","_config","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","asyncGeneratorStep","o","c","value","done","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_defineProperty","_toPropertyKey","enumerable","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","AppHelper","serverErrorListening","error","syscall","code","Log","info","process","exit","concat","Config","IConfigKey","PORT","serverListening","server","address","port","processEventsListening","HTTP","on","close","SIGINTError","Error","kill","pid","reason","req","res","platform","status","StatusCodes","OK","json","ApiResponseHelper","mode","NODE_ENV","platfrom","ApiErrorResponseHelper","NOT_FOUND","getReasonPhrase","_default","exports"],"sources":["../../../src/helpers/app/App.helper.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport StatusCodes, { getReasonPhrase } from \"http-status-codes\";\nimport HTTP from \"node:http\";\nimport { AddressInfo } from \"node:net\";\nimport { ApiErrorResponseHelper, ApiResponseHelper, Log } from \"@/helpers\";\nimport { Config, IConfigKey } from \"@/config\";\n\nclass AppHelper {\n  public static async serverErrorListening(error: NodeJS.ErrnoException): Promise<void> {\n    if (error.syscall !== \"listen\") {\n      throw error;\n    }\n\n    switch (error.code) {\n      case \"EACCES\":\n        Log.info(\"Requires privileges\");\n        return process.exit(1);\n\n      case \"EADDRINUSE\":\n        Log.error(`${Config.get(IConfigKey.PORT)} is already in use`);\n        return process.exit(1);\n\n      default:\n        throw error;\n    }\n  }\n\n  public static async serverListening(server: HTTP.Server): Promise<void> {\n    const address: AddressInfo = <AddressInfo>server.address();\n    Log.info(`Express engine is running on ${address.port} üöÄ`);\n  }\n\n  public static processEventsListening(HTTP: HTTP.Server): void {\n    process\n      .on(\"SIGINT\", () => {\n        try {\n          HTTP.close();\n        } catch (SIGINTError: unknown) {\n          if (SIGINTError instanceof Error) {\n            Log.error(`Error occurred during shutdown server`, SIGINTError);\n          }\n        } finally {\n          Log.info(`Express engine shutdown successfully üå±`);\n          process.exit(1);\n        }\n      })\n      .on(\"SIGHUP\", () => {\n        process.kill(process.pid, \"SIGTERM\");\n      })\n      .on(\"uncaughtException\", (error: Error) => {\n        Log.error(`Uncaught Exception thrown`, error);\n        HTTP.close();\n        process.exit(1);\n      })\n      .on(\"unhandledRejection\", (reason: Error) => {\n        Log.error(`Unhandled Rejection thrown`, reason);\n        HTTP.close();\n        process.exit(1);\n      });\n  }\n\n  public static useAppHealthRoute = (req: Request, res: Response): Response => {\n    const { platform, pid } = process;\n    return res.status(StatusCodes.OK).json(\n      new ApiResponseHelper<Record<string, unknown>>(\n        StatusCodes.OK,\n        \"Welcome to backend! Made in Node with ‚ù§Ô∏è\",\n        {\n          mode: Config.get<string>(IConfigKey.NODE_ENV),\n          platfrom: platform,\n          pid: pid\n        }\n      )\n    );\n  };\n\n  public static useAppNotFoundRoute = (): void => {\n    throw new ApiErrorResponseHelper<string>(\n      StatusCodes.NOT_FOUND,\n      \"Request resource not found\",\n      getReasonPhrase(StatusCodes.NOT_FOUND)\n    );\n  };\n}\nexport default AppHelper;\n"],"mappings":"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","ignoreList":[]}